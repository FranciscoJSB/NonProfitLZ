{
    "$schema": "http://schema.management.azure.com/schemas/2021-09-09/uiFormDefinition.schema.json#",
    "view": {
        "kind": "Form",
        "properties": {
            "title": "Custom Deployment",
            "steps": [
                {
                    "name": "identityManagement",
                    "label": "Identity Management",
                    "elements": [
                        {
                            "name": "keyVaultName",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Key Vault Name",
                            "toolTip": "The name of the Key Vault.",
                            "defaultValue": "my-keyvault",
                            "constraints": {
                                "required": true,
                                "validations": [
                                    {
                                        "regex": "^[a-zA-Z0-9-]{3,24}$",
                                        "message": "The Key Vault name must be between 3 and 24 characters long and contain only letters, numbers, and hyphens."
                                    }
                                ]
                            }
                        },
                        {
                            "name": "location1",
                            "type": "Microsoft.Common.Location",
                            "label": "Location for Key Vault",
                            "toolTip": "The Azure location where the Key Vault will be deployed.",
                            "constraints": {
                                "required": true
                            }
                        }
                    ]
                },
                {
                    "name": "connectivity",
                    "label": "Connectivity",
                    "elements": [
                        {
                            "name": "vnetName",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Virtual Network Name",
                            "toolTip": "The name of the Virtual Network.",
                            "defaultValue": "my-vnet",
                            "constraints": {
                                "required": true,
                                "validations": [
                                    {
                                        "regex": "^[a-zA-Z0-9-]{3,24}$",
                                        "message": "The Virtual Network name must be between 3 and 24 characters long and contain only letters, numbers, and hyphens."
                                    }
                                ]
                            }
                        },
                        {
                            "name": "location2",
                            "type": "Microsoft.Common.Location",
                            "label": "Location for Virtual Network",
                            "toolTip": "The Azure location where the Virtual Network will be deployed.",
                            "constraints": {
                                "required": true
                            }
                        },
                        {
                            "name": "additionalSubnetName",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Additional Subnet Name",
                            "toolTip": "The name of the Additional Subnet.",
                            "defaultValue": "additional-subnet",
                            "constraints": {
                                "required": true,
                                "validations": [
                                    {
                                        "regex": "^[a-zA-Z0-9-]{3,24}$",
                                        "message": "The Additional Subnet name must be between 3 and 24 characters long and contain only letters, numbers, and hyphens."
                                    }
                                ]
                            }
                        },
                        {
                            "name": "additionalSubnetAddress",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Additional Subnet Address",
                            "toolTip": "Address space for the Additional Subnet.",
                            "defaultValue": "10.0.3.0/24",
                            "constraints": {
                                "required": true
                            }
                        }
                    ]
                }
            ]
        },
        "outputs": {
            "parameters": {
                "keyVaultName": "[steps('identityManagement').keyVaultName]",
                "location1": "[steps('identityManagement').location1]",
                "vnetName": "[steps('connectivity').vnetName]",
                "location2": "[steps('connectivity').location2]",
                "additionalSubnetName": "[steps('connectivity').additionalSubnetName]",
                "additionalSubnetAddress": "[steps('connectivity').additionalSubnetAddress]"
            }
        }
    }
}
